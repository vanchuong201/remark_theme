/*!
 * remark (http://getbootstrapadmin.com/remark)
 * Copyright 2017 amazingsurge
 * Licensed under the Themeforest Standard Licenses
 */
!function(global,factory){if("function"==typeof define&&define.amd)define("/apps/AppCalendar",["exports","Site","Config"],factory);else if("undefined"!=typeof exports)factory(exports,require("Site"),require("Config"));else{var mod={exports:{}};factory(mod.exports,global.Site,global.Config),global.appsAppCalendar=mod.exports}}(this,function(exports,_Site2,_Config){"use strict";function getInstance(){return instance||(instance=new AppCalendar),instance}function run(){var app=getInstance();app.run()}Object.defineProperty(exports,"__esModule",{value:!0}),exports.getInstance=exports.run=exports.AppCalendar=void 0;var _Site3=babelHelpers.interopRequireDefault(_Site2),AppCalendar=function(_Site){function AppCalendar(){return babelHelpers.classCallCheck(this,AppCalendar),babelHelpers.possibleConstructorReturn(this,(AppCalendar.__proto__||Object.getPrototypeOf(AppCalendar)).apply(this,arguments))}return babelHelpers.inherits(AppCalendar,_Site),babelHelpers.createClass(AppCalendar,[{key:"processed",value:function(){babelHelpers.get(AppCalendar.prototype.__proto__||Object.getPrototypeOf(AppCalendar.prototype),"processed",this).call(this),this.$actionToggleBtn=$(".site-action-toggle"),this.$addNewCalendarForm=$("#addNewCalendar").modal({show:!1}),this.handleFullcalendar(),this.handleSelective(),this.handleAction(),this.handleListItem(),this.handleEventList()}},{key:"handleFullcalendar",value:function(){var my_events=[{title:"All Day Event",start:"2016-10-01"},{title:"Long Event",start:"2016-10-07",end:"2016-10-10",backgroundColor:(0,_Config.colors)("cyan",600),borderColor:(0,_Config.colors)("cyan",600)},{id:999,title:"Repeating Event",start:"2016-10-09T16:00:00",backgroundColor:(0,_Config.colors)("red",600),borderColor:(0,_Config.colors)("red",600)},{title:"Conference",start:"2016-10-11",end:"2016-10-13"},{title:"Meeting",start:"2016-10-12T10:30:00",end:"2016-10-12T12:30:00"},{title:"Lunch",start:"2016-10-12T12:00:00"},{title:"Meeting",start:"2016-10-12T14:30:00"},{title:"Happy Hour",start:"2016-10-12T17:30:00"},{title:"Dinner",start:"2016-10-12T20:00:00"},{title:"Birthday Party",start:"2016-10-13T07:00:00"}],my_options={header:{left:null,center:"prev,title,next",right:"month,agendaWeek,agendaDay"},defaultDate:"2016-10-12",selectable:!0,selectHelper:!0,select:function(){$("#addNewEvent").modal("show")},editable:!0,eventLimit:!0,windowResize:function(view){var width=$(window).outerWidth(),options=Object.assign({},my_options);options.events=view.calendar.getEventCache(),options.aspectRatio=width<667?.5:1.35,$("#calendar").fullCalendar("destroy"),$("#calendar").fullCalendar(options)},eventClick:function(event){var color=event.backgroundColor?event.backgroundColor:(0,_Config.colors)("blue",600);$("#editEname").val(event.title),event.start?$("#editStarts").datepicker("update",event.start._d):$("#editStarts").datepicker("update",""),event.end?$("#editEnds").datepicker("update",event.end._d):$("#editEnds").datepicker("update",""),$("#editColor [type=radio]").each(function(){var $this=$(this),_value=$this.data("color").split("|"),value=(0,_Config.colors)(_value[0],_value[1]);value===color?$this.prop("checked",!0):$this.prop("checked",!1)}),$("#editColor [value="+event.backgroundColor+"]").prop("checked",!0),$("#editNewEvent").modal("show").one("hidden.bs.modal",function(e){event.title=$("#editEname").val();var color=$("#editColor [type=radio]:checked").data("color").split("|");color=(0,_Config.colors)(color[0],color[1]),event.backgroundColor=color,event.borderColor=color,event.start=new Date($("#editStarts").data("datepicker").getDate()),event.end=new Date($("#editEnds").data("datepicker").getDate()),$("#calendar").fullCalendar("updateEvent",event)})},eventDragStart:function(){$(".site-action").data("actionBtn").show()},eventDragStop:function(){$(".site-action").data("actionBtn").hide()},events:my_events,droppable:!0},_options=void 0,my_options_mobile=Object.assign({},my_options);my_options_mobile.aspectRatio=.5,_options=$(window).outerWidth()<667?my_options_mobile:my_options,$("#editNewEvent").modal(),$("#calendar").fullCalendar(_options)}},{key:"handleSelective",value:function(){var member=[{id:"uid_1",name:"Herman Beck",avatar:"../../../../global/portraits/1.jpg"},{id:"uid_2",name:"Mary Adams",avatar:"../../../../global/portraits/2.jpg"},{id:"uid_3",name:"Caleb Richards",avatar:"../../../../global/portraits/3.jpg"},{id:"uid_4",name:"June Lane",avatar:"../../../../global/portraits/4.jpg"}],items=[{id:"uid_1",name:"Herman Beck",avatar:"../../../../global/portraits/1.jpg"},{id:"uid_2",name:"Caleb Richards",avatar:"../../../../global/portraits/2.jpg"}];$('[data-plugin="jquery-selective"]').selective({namespace:"addMember",local:member,selected:items,buildFromHtml:!1,tpl:{optionValue:function(data){return data.id},frame:function(){return'<div class="'+this.namespace+'">'+this.options.tpl.items.call(this)+'<div class="'+this.namespace+'-trigger">'+this.options.tpl.triggerButton.call(this)+'<div class="'+this.namespace+'-trigger-dropdown">'+this.options.tpl.list.call(this)+"</div></div></div>"},triggerButton:function(){return'<div class="'+this.namespace+'-trigger-button"><i class="wb-plus"></i></div>'},listItem:function(data){return'<li class="'+this.namespace+'-list-item"><img class="avatar" src="'+data.avatar+'">'+data.name+"</li>"},item:function(data){return'<li class="'+this.namespace+'-item"><img class="avatar" src="'+data.avatar+'" title="'+data.name+'">'+this.options.tpl.itemRemove.call(this)+"</li>"},itemRemove:function(){return'<span class="'+this.namespace+'-remove"><i class="wb-minus-circle"></i></span>'},option:function(data){return'<option value="'+this.options.tpl.optionValue.call(this,data)+'">'+data.name+"</option>"}}})}},{key:"handleAction",value:function(){var _this2=this;this.$actionToggleBtn.on("click",function(e){_this2.$addNewCalendarForm.modal("show"),e.stopPropagation()})}},{key:"handleEventList",value:function(){$("#addNewEventBtn").on("click",function(){$("#addNewEvent").modal("show")}),$(".calendar-list .calendar-event").each(function(){var $this=$(this),color=$this.data("color").split("-");$this.data("event",{title:$this.data("title"),stick:$this.data("stick"),backgroundColor:(0,_Config.colors)(color[0],color[1]),borderColor:(0,_Config.colors)(color[0],color[1])}),$this.draggable({zIndex:999,revert:!0,revertDuration:0,appendTo:".page",helper:function(){return'<a class="fc-day-grid-event fc-event fc-start fc-end" style="background-color:'+(0,_Config.colors)(color[0],color[1])+";border-color:"+(0,_Config.colors)(color[0],color[1])+'"><div class="fc-content"><span class="fc-title">'+$this.data("title")+"</span></div></a>"}})})}},{key:"handleListItem",value:function(){this.$actionToggleBtn.on("click",function(e){$("#addNewCalendar").modal("show"),e.stopPropagation()}),$(document).on("click","[data-tag=list-delete]",function(e){bootbox.dialog({message:"Do you want to delete the calendar?",buttons:{success:{label:"Delete",className:"btn-danger",callback:function(){}}}})})}}]),AppCalendar}(_Site3.default),instance=null;exports.default=AppCalendar,exports.AppCalendar=AppCalendar,exports.run=run,exports.getInstance=getInstance});